import{c as y,d as M,r as c,a as O,w as j,b as r,e,f as g,g as B,h as f,i as b,_ as S,j as T,v as F,B as _,k,t as m,l as w,u as x,F as L,m as D,n as C,o,p as R}from"./index-DIl2wOU4.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=y("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=y("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=y("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),P={class:"h-full flex flex-col p-6"},q={class:"max-w-2xl mx-auto w-full space-y-6"},J={class:"bg-vs-ibg border border-vs-border rounded-lg p-6"},X=["disabled"],K=["disabled"],Q={key:0},W={key:1},Y={key:0,class:"bg-vs-pbg border border-vs-border rounded-lg p-4"},Z={class:"text-xs font-mono text-gray-300 break-all"},ee={key:1,class:"space-y-4"},te={class:"flex items-center space-x-2"},se={class:"font-medium"},oe={key:2,class:"text-sm text-gray-400"},le={key:0,class:"bg-vs-ibg border border-vs-border rounded p-4"},ae={class:"font-medium mb-2"},re={class:"max-h-40 overflow-y-auto space-y-1"},ne={class:"mt-3 flex gap-2"},ie={key:1,class:"bg-vs-pbg border border-vs-border rounded p-4"},ue={class:"font-medium mb-2"},de={class:"text-xs font-mono text-gray-300 whitespace-pre-wrap max-h-60 overflow-y-auto"},pe={key:2,class:"bg-vs-pbg border border-vs-border rounded"},ce={class:"p-4 border-t border-vs-border"},ve={class:"text-xs font-mono text-gray-300 whitespace-pre-wrap"},me=M({__name:"CodeGenSettings",setup(G){const l=c("https://petstore3.swagger.io/api/v3/openapi.json"),a=c("./src/generated-api"),n=c("fetch"),v=c("@openapitools/openapi-generator-cli"),i=c(!1),s=c(null),u=c(""),h=O(()=>l.value.trim()&&a.value.trim()),$=O(()=>h.value?v.value==="openapi-typescript-codegen"?`npx ${v.value} --input "${l.value}" --output "${a.value}" --client ${n.value}`:`npx ${v.value} generate -g javascript -i ${l.value} -o ${a.value}`:"");j([l,a,n],()=>{s.value=null});async function U(){if(h.value){i.value=!0,s.value=null,u.value="";try{console.log("Starting code generation..."),u.value=`Starting generation at ${new Date().toISOString()}
`,u.value+=`URL: ${l.value}
`,u.value+=`Output: ${a.value}
`,u.value+=`Client: ${n.value}

`;const d=await C.generateCode({generator:v.value,language:v.value==="openapi-typescript-codegen"?"ts":"js",input:l.value,output:a.value,client:n.value});u.value+=`Response received:
${JSON.stringify(d,null,2)}`}catch(d){console.error("Generation failed:",d),s.value={success:!1,error:d instanceof Error?d.message:"Unknown error occurred"},u.value+=`Error: ${d}
`}finally{i.value=!1}}}async function z(){try{await C.openInFileManager(a.value)}catch(d){console.error("Failed to open folder:",d)}}async function I(){try{console.log("TODO: refresh file explorer")}catch(d){console.error("Failed to refresh explorer:",d)}}return(d,t)=>{var V;return o(),r("div",P,[e("div",q,[t[16]||(t[16]=e("div",{class:"border-b border-vs-border pb-4"},[e("h1",{class:"text-2xl font-bold text-vs-fg"},"Code Generation Test"),e("p",{class:"text-sm text-gray-400 mt-2"},"Test openapi-codegen CLI commands")],-1)),e("div",J,[e("form",{onSubmit:B(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium mb-2"},[b(" OpenAPI JSON URL "),e("span",{class:"text-red-500"},"*")],-1)),f(S,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=p=>l.value=p),placeholder:"https://petstore3.swagger.io/api/v3/openapi.json",class:"w-full",disabled:i.value},null,8,["modelValue","disabled"]),t[5]||(t[5]=e("p",{class:"text-xs text-gray-400 mt-1"},"Try: https://petstore3.swagger.io/api/v3/openapi.json",-1))]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium mb-2"},[b(" Output Directory "),e("span",{class:"text-red-500"},"*")],-1)),f(S,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=p=>a.value=p),placeholder:"./src/generated-api",class:"w-full",disabled:i.value},null,8,["modelValue","disabled"]),t[7]||(t[7]=e("p",{class:"text-xs text-gray-400 mt-1"},"Relative to your workspace root",-1))]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2"},"HTTP Client",-1)),T(e("select",{"onUpdate:modelValue":t[2]||(t[2]=p=>n.value=p),class:"w-full p-2 border rounded bg-vs-ibg border-vs-border text-vs-fg",disabled:i.value},t[8]||(t[8]=[e("option",{value:"fetch"},"Fetch API",-1),e("option",{value:"axios"},"Axios",-1)]),8,X),[[F,n.value]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium mb-2"},"Generator",-1)),T(e("select",{"onUpdate:modelValue":t[3]||(t[3]=p=>v.value=p),class:"w-full p-2 border rounded bg-vs-ibg border-vs-border text-vs-fg",disabled:i.value},t[10]||(t[10]=[e("option",{value:"openapi-typescript-codegen"},"openapi-typescript-codegen",-1),e("option",{value:"@openapitools/openapi-generator-cli"}," @openapitools/openapi-generator-cli ",-1)]),8,K),[[F,v.value]])]),f(_,{type:"submit",disabled:!h.value||i.value,block:!0},{default:k(()=>[i.value?(o(),r("span",Q,"Generating Code...")):(o(),r("span",W,"Generate TypeScript Client"))]),_:1},8,["disabled"])],32)]),$.value?(o(),r("div",Y,[t[12]||(t[12]=e("h3",{class:"text-sm font-medium mb-2"},"Command that will be executed:",-1)),e("code",Z,m($.value),1)])):g("",!0),s.value?(o(),r("div",ee,[e("div",te,[s.value.success?(o(),w(x(A),{key:0,class:"text-green-400",size:20})):(o(),w(x(E),{key:1,class:"text-red-400",size:20})),e("span",se,m(s.value.success?"Generation completed!":"Generation failed"),1),s.value.duration?(o(),r("span",oe," ("+m(s.value.duration)+"ms) ",1)):g("",!0)]),s.value.success&&((V=s.value.files)!=null&&V.length)?(o(),r("div",le,[e("h4",ae,"Generated Files ("+m(s.value.files.length)+"):",1),e("div",re,[(o(!0),r(L,null,D(s.value.files,p=>(o(),r("div",{key:p,class:"text-sm font-mono text-gray-300 bg-vs-pbg px-2 py-1 rounded"},m(p),1))),128))]),e("div",ne,[f(_,{onClick:z,variant:"outlined",size:"sm"},{default:k(()=>[f(x(N),{size:16,class:"mr-1"}),t[13]||(t[13]=b(" Open Folder "))]),_:1,__:[13]}),f(_,{onClick:I,variant:"outlined",size:"sm"},{default:k(()=>[f(x(H),{size:16,class:"mr-1"}),t[14]||(t[14]=b(" Refresh Explorer "))]),_:1,__:[14]})])])):g("",!0),s.value.output||s.value.error?(o(),r("div",ie,[e("h4",ue,m(s.value.error?"Error Output:":"Command Output:"),1),e("pre",de,m(s.value.output||s.value.error),1)])):g("",!0)])):g("",!0),u.value?(o(),r("details",pe,[t[15]||(t[15]=e("summary",{class:"p-3 cursor-pointer hover:bg-vs-hover"},[e("span",{class:"font-medium"},"Debug Information")],-1)),e("div",ce,[e("pre",ve,m(u.value),1)])])):g("",!0)])])}}}),fe={};function ge(G,l){return o(),r("div",null,l[0]||(l[0]=[e("p",null,"codegen output",-1)]))}const be=R(fe,[["render",ge]]),xe={class:"h-full flex flex-col p-6 overflow-y-auto"},ye={class:"max-w-4xl mx-auto w-full space-y-6"},_e=M({__name:"CodeGenView",setup(G){const l=c(!1),a=c({generator:"@openapitools/openapi-generator-cli",language:"js",input:"",output:"./src/api",client:"fetch",useOptions:!0,useUnionTypes:!1,exportCore:!0,exportSchemas:!0,exportModels:!0,exportServices:!0,indent:"2",postfixServices:"Service",postfixModels:"",request:"./core/request",write:!0}),n=c(null);async function v(i){l.value=!0,n.value=null;try{const s=await C.generateCode(i);n.value=s}catch(s){console.error("Code generation failed:",s)}finally{l.value=!1}}return(i,s)=>(o(),r("div",xe,[e("div",ye,[s[1]||(s[1]=e("div",{class:"border-b border-vs-border pb-4"},[e("h1",{class:"text-2xl font-bold text-vs-fg"},"Code Generation"),e("p",{class:"text-sm text-gray-400 mt-2"}," Generate TypeScript client code from your OpenAPI specification ")],-1)),f(me,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value=u),loading:l.value,onGenerate:v},null,8,["modelValue","loading"]),n.value?(o(),w(be,{key:0,result:n.value,config:a.value},null,8,["result","config"])):g("",!0)])]))}});export{_e as default};
